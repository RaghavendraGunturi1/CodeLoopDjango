{% extends "codingapp/base.html" %}

{% block title %}
    {{ action }} Assessment
{% endblock %}

{% block content %}
<div class="card p-4 mx-auto" style="max-width: 900px;">
  <h2>{{ action }} Assessment</h2>

  {% if form.errors %}
      <div class="alert alert-danger" role="alert">
          <ul>
              {% for field in form %}
                  {% for error in field.errors %}
                      <li>{{ field.label }}: {{ error }}</li>
                  {% endfor %}
              {% endfor %}
              {% for error in form.non_field_errors %}
                  <li>{{ error }}</li>
              {% endfor %}
          </ul>
      </div>
  {% endif %}

  <form method="post">
    {% csrf_token %}
    
    <div class="mb-3">
      <label for="{{ form.title.id_for_label }}" class="form-label">{{ form.title.label }}</label>
      {{ form.title }}
    </div>
    <div class="mb-3">
      <label for="{{ form.description.id_for_label }}" class="form-label">{{ form.description.label }}</label>
      {{ form.description }}
    </div>

    <div class="row">
      <div class="col-md-4 mb-3">
        <label for="{{ form.duration_minutes.id_for_label }}" class="form-label">{{ form.duration_minutes.label }}</label>
        {{ form.duration_minutes }}
      </div>
      <div class="col-md-4 mb-3">
        <label for="{{ form.start_time.id_for_label }}" class="form-label">{{ form.start_time.label }}</label>
        {{ form.start_time }}
      </div>
      <div class="col-md-4 mb-3">
        <label for="{{ form.end_time.id_for_label }}" class="form-label">{{ form.end_time.label }}</label>
        {{ form.end_time }}
      </div>
    </div>

    <div class="mb-3">
      <div class="form-check">
        {{ form.quiz }}
        <label class="form-check-label" for="{{ form.quiz.id_for_label }}">{{ form.quiz.label }}</label>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">{{ form.groups.label }}</label>
      <div class="form-control" style="max-height: 150px; overflow-y: auto;">
        {% for checkbox in form.groups %}
          <div class="form-check">
            {{ checkbox.tag }}
            <label class="form-check-label" for="{{ checkbox.id_for_label }}">{{ checkbox.choice_label }}</label>
          </div>
        {% endfor %}
      </div>
      <div class="form-text text-muted small">{{ form.groups.help_text }}</div>
    </div>

    <div class="mb-3">
      <label class="form-label">{{ form.questions.label }}</label>
      <div class="form-control" style="max-height: 250px; overflow-y: auto;">
        {% for checkbox in form.questions %}
          <div class="form-check">
            {{ checkbox.tag }}
            <label class="form-check-label" for="{{ checkbox.id_for_label }}">{{ checkbox.choice_label }}</label>
          </div>
        {% endfor %}
      </div>
      <div class="form-text text-muted small">{{ form.questions.help_text }}</div>
    </div>
    
    <div class="d-flex gap-2 mt-3">
        <button type="submit" class="btn btn-success">{{ action }}</button>
        <a href="{% url 'teacher_assessment_list' %}" class="btn btn-secondary">Cancel</a>
    </div>
  </form>
</div>
{% endblock %}